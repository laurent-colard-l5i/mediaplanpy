{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Media Plan PY Workspace Configuration",
    "type": "object",
    "required": ["workspace_name", "storage"],
    "properties": {
        "workspace_name": {
            "type": "string",
            "description": "Name of this workspace configuration"
        },
        "environment": {
            "type": "string",
            "description": "Environment this configuration applies to",
            "enum": ["development", "testing", "production"],
            "default": "development"
        },
        "storage": {
            "type": "object",
            "required": ["mode"],
            "properties": {
                "mode": {
                    "type": "string",
                    "enum": ["local", "s3", "gdrive"],
                    "default": "local",
                    "description": "Storage mode for media plans"
                },
                "local": {
                    "type": "object",
                    "properties": {
                        "base_path": {
                            "type": "string",
                            "description": "Base directory for storing media plans"
                        },
                        "create_if_missing": {
                            "type": "boolean",
                            "default": true,
                            "description": "Create directory if it doesn't exist"
                        }
                    }
                },
                "s3": {
                    "type": "object",
                    "properties": {
                        "bucket": {
                            "type": "string",
                            "description": "S3 bucket name"
                        },
                        "prefix": {
                            "type": "string",
                            "description": "Optional prefix for all objects",
                            "default": "mediaplans/"
                        },
                        "profile": {
                            "type": "string",
                            "description": "AWS profile name to use for authentication"
                        },
                        "region": {
                            "type": "string",
                            "description": "AWS region"
                        }
                    }
                },
                "gdrive": {
                    "type": "object",
                    "properties": {
                        "folder_id": {
                            "type": "string",
                            "description": "Google Drive folder ID to store media plans"
                        },
                        "credentials_path": {
                            "type": "string",
                            "description": "Path to Google API credentials file"
                        },
                        "token_path": {
                            "type": "string",
                            "description": "Path to store the OAuth token"
                        }
                    }
                }
            }
        },
        "schema_settings": {
            "type": "object",
            "description": "Schema configuration settings",
            "properties": {
                "preferred_version": {
                    "type": "string",
                    "description": "Preferred schema version to use",
                    "default": "v1.0.0"
                },
                "auto_migrate": {
                    "type": "boolean",
                    "description": "Automatically migrate to preferred version when loading",
                    "default": false
                },
                "offline_mode": {
                    "type": "boolean",
                    "description": "Only use locally cached schemas",
                    "default": false
                },
                "repository_url": {
                    "type": "string",
                    "description": "URL to the schema repository",
                    "default": "https://raw.githubusercontent.com/laurent-colard-l5i/mediaplanschema/main/"
                },
                "local_cache_dir": {
                    "type": "string",
                    "description": "Directory to cache schemas locally",
                    "default": "${user_home}/.mediaplanpy/schemas"
                }
            }
        },
        "database": {
            "type": "object",
            "description": "Optional PostgreSQL database configuration",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable database integration"
                },
                "host": {
                    "type": "string",
                    "description": "PostgreSQL host"
                },
                "port": {
                    "type": "integer",
                    "default": 5432,
                    "description": "PostgreSQL port"
                },
                "database": {
                    "type": "string",
                    "description": "Database name"
                },
                "schema": {
                    "type": "string",
                    "default": "public",
                    "description": "Schema name"
                },
                "ssl": {
                    "type": "boolean",
                    "default": true,
                    "description": "Use SSL for database connection"
                }
            }
        },
        "excel": {
            "type": "object",
            "description": "Excel configuration",
            "properties": {
                "template_path": {
                    "type": "string",
                    "description": "Path to Excel template file"
                },
                "default_export_path": {
                    "type": "string",
                    "description": "Default path for Excel exports"
                }
            }
        },
        "google_sheets": {
            "type": "object",
            "description": "Google Sheets configuration",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable Google Sheets integration"
                },
                "credentials_path": {
                    "type": "string",
                    "description": "Path to Google API credentials file"
                },
                "template_id": {
                    "type": "string",
                    "description": "ID of template Google Sheet to use for exports"
                }
            }
        },
        "storage_formats": {
            "type": "object",
            "description": "Default settings for storage formats",
            "properties": {
                "default_format": {
                    "type": "string",
                    "enum": ["json", "parquet"],
                    "default": "json",
                    "description": "Default format to use when not specified"
                },
                "json": {
                    "type": "object",
                    "properties": {
                        "indent": {
                            "type": "integer",
                            "default": 2,
                            "description": "Number of spaces for indentation in JSON files"
                        },
                        "ensure_ascii": {
                            "type": "boolean",
                            "default": false,
                            "description": "Ensure ASCII characters only in JSON output"
                        }
                    }
                },
                "parquet": {
                    "type": "object",
                    "properties": {
                        "compression": {
                            "type": "string",
                            "enum": ["none", "snappy", "gzip", "brotli", "lz4", "zstd"],
                            "default": "snappy",
                            "description": "Compression algorithm for Parquet files"
                        }
                    }
                }
            }
        },
        "logging": {
            "type": "object",
            "description": "Logging configuration",
            "properties": {
                "level": {
                    "type": "string",
                    "enum": ["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"],
                    "default": "INFO"
                },
                "file": {
                    "type": "string",
                    "description": "Optional log file path"
                }
            }
        }
    }
}